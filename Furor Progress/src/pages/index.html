<!--
  Forked from:
  https://quasar.dev/vue-components/table#Example--Popup-editing
-->
<div id="q-app">
  <div class="q-pa-sm q-gutter-sm">
    <q-table title="Crud" :data="data" :columns="columns" row-key="name" binary-state-sort>
      <template v-slot:top>
          <q-btn flat outline dense color="primary" label="Element qo'shish" @click="show_dialog = true" ></q-btn>

        <div class="q-pa-sm q-gutter-sm">
        <q-dialog v-model="show_dialog">
        <q-card>
          <q-card-section>
            <div class="text-h6">Yangi elementlarni qo'shish!</div>
          </q-card-section>

          <q-card-section>
            <div class="row">
              <q-input v-model="editedItem.name" label="Product Type ID"></q-input>
              <q-input v-model="editedItem.calories" label="Calories"></q-input>
              <q-input v-model="editedItem.fat" label="Fat"></q-input>
              <q-input v-model="editedItem.carbs" label="Carbs"></q-input>
              <q-input v-model="editedItem.protein" label="Protein"></q-input>
              <q-input v-model="editedItem.sodium" label="Sodium"></q-input>
              <q-input v-model="editedItem.calcium" label="Calcium"></q-input>
              <q-input v-model="editedItem.iron" label="Iron"></q-input>
            </div>
          </q-card-section>

          <q-card-actions align="right">
            <q-btn flat label="OK" color="primary" v-close-popup @click="addRow" ></q-btn>
          </q-card-actions>
    </q-dialog>
          </div>

      </template>

      <template v-slot:body="props">
          <q-tr :props="props">
            <q-td key="desc" :props="props">
              {{ props.row.name }}
              <q-popup-edit v-model="props.row.name">
                <q-input v-model="props.row.name" dense autofocus counter ></q-input>
              </q-popup-edit>
            </q-td>
            <q-td key="calories" :props="props">
              {{ props.row.calories }}
              <q-popup-edit v-model="props.row.calories" title="Update calories" buttons>
                <q-input type="number" v-model="props.row.calories" dense autofocus ></q-input>
              </q-popup-edit>
            </q-td>
            <q-td key="fat" :props="props">
              <div class="text-pre-wrap">{{ props.row.fat }}</div>
              <q-popup-edit v-model="props.row.fat">
                <q-input type="textarea" v-model="props.row.fat" dense autofocus ></q-input>
              </q-popup-edit>
            </q-td>
            <q-td key="carbs" :props="props">
              {{ props.row.carbs }}
              <q-popup-edit v-model="props.row.carbs" title="Update carbs" buttons persistent>
                <q-input type="number" v-model="props.row.carbs" dense autofocus hint="Use buttons to close" ></q-input>
              </q-popup-edit>
            </q-td>
            <q-td key="protein" :props="props">{{ props.row.protein }}</q-td>
            <q-td key="sodium" :props="props">{{ props.row.sodium }}</q-td>
            <q-td key="calcium" :props="props">{{ props.row.calcium }}</q-td>
            <q-td key="iron" :props="props">{{ props.row.iron }}</q-td>
            <q-td key="actions" :props="props">
              <q-btn color="blue" label="update" @click="editItem(props.row)" size=sm></q-btn>
              <q-btn color="red" label="delete"  @click="deleteItem(props.row)" size=sm></q-btn>
            </q-td>
          </q-tr>
        </template>
    </q-table>
  </div>
</div>
